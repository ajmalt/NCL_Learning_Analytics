---
title: "Data understanding reports"
author: "Alexander J Malt"
date: "26/11/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir= normalizePath('..'))
```

```{r project, include=FALSE}
library(ProjectTemplate)
load.project()
source("src/initialExploration.R")
```

This document contains four reports:

1. **Initial data collection report**, lising the datasets provided.
2. **Data description report**, describing each field in the dataset.
3. **Data exploration report**, outlining necessary pre-processing operations for later analysis (*AND PATTERNS UNCOVERED*).
4. **Data quality report** describing the completeness of the data provided.

# Initial data collection report

The University provided dataset from 7 runs an online cyber-security course in csv format. The data concerned the following areas:

* User activity;
* User personality archetypes;
* User enrollment;
* Leaving survey responses;
* Assessment data;
* Team members; and
* Video statistics.

This data was supported by 7 PDF documents, each providing further information about a particular run of the course (start and end dates, information about each 'step' of the course, etc.).

# Data description report

## User activity data (activityData)

The User activity datasets consist of seven files which - I assume - contain logs when users begin and complete steps on the course. The files are entitled:

* cyber-security-1_step-activity.csv
* cyber-security-2_step-activity.csv
* cyber-security-3_step-activity.csv
* cyber-security-4_step-activity.csv
* cyber-security-5_step-activity.csv
* cyber-security-6_step-activity.csv
* cyber-security-7_step-activity.csv

Each file contained the following fields:

* *learner_id*, containing a hash uniquely identifing an individual student. I assume that each hash/learner_id is unique to the individual student but that the hash will be common to all datasets (permitting merging/joining of the data frames).
* *step*, containing a value for the 'step' of the course, e.g. '1.2'. I have assumed that this value is essentially a concatenation of the next two fields: that the number to the left of the decimal refers to the week of the course and the number to the right of the decimal refers to the step number.
* *week_number*, giving the week on which the user's activity is logged.
* *step_number*, giving the step of the course which the user's activity relates to.
* *first_visited_at*, giving a date and time. I assume this timestamp denotes when the user first accessed this step of the course.
* *last_completed_at*, giving a date and time. I assume this timestamp denotes when the user completed this step of the course.

Because these columns are common to all files in the dataset, I added a new *courseID* column to each dataset - to denote which run of the course the data refers to - and then merged the data from each individual file into a single data frame (**activityData**) using `rbind()`. Once merged, I added two additional fields derived from *first_visited_at* and *last_completed_at*, containing only the date values (ommitting time) and formated as dates rather than factors (anticipating possible time series analysis).

The activityData data frame is therefore structured as follows:

```{r structure of user activity data, echo=FALSE}
str(activityData)
```


## User personality archetypes data

The User personality archetypes data consists of seven files, however the files for the first two years of the course were empty, i.e. contained no data beyond column headings:

* cyber-security-1_archetype-survey-responses.csv - *empty*
* cyber-security-2_archetype-survey-responses.csv - *empty*
* cyber-security-3_archetype-survey-responses.csv
* cyber-security-4_archetype-survey-responses.csv
* cyber-security-5_archetype-survey-responses.csv
* cyber-security-6_archetype-survey-responses.csv
* cyber-security-7_archetype-survey-responses.csv

Each file contained the following fields:

* *id*, containing a numerical figure identifying each row of data in the archetype survey responses.
* *learner_id*, containing a hash uniquely identifing an individual student. I assume that each hash/learner_id is unique to the individual student but that the hash will be common to all datasets (permitting merging/joining of the data frames).
* *responded_at*, giving a date and time. I assume this timestamp denotes when a behavioural archetype was assigned to the user (following the user's answering the relevant questions).
* *archetype*, categorising each student in the dataset as one of a set of behavioural archetypes. The list of behavioural archetypes and their respective meanings are viewable on the [Future Learn website](https://about.futurelearn.com/research-insights/learners-part-1).

Because these columns are common to all files in the dataset, I added a new *courseID* column to each dataset - to denote which run of the course the data refers to - and then merged the data from each individual file into a single data frame (**archetypeData**) using `rbind()`.


```{r structure of archetype data, echo=FALSE}
str(archetypeData)
```


## User enrollment data

The User enrollment data consists of seven files:

* cyber-security-1_enrolments.csv
* cyber-security-2_enrolments.csv
* cyber-security-3_enrolments.csv
* cyber-security-4_enrolments.csv
* cyber-security-5_enrolments.csv
* cyber-security-6_enrolments.csv
* cyber-security-7_enrolments.csv

These files contain the following fields:

* *learner_id*, containing a hash uniquely identifing an individual student. I assume that each hash/learner_id is unique to the individual student but that the hash will be common to all datasets (permitting merging/joining of the data frames).
* *enrolled_at*, giving a date and time. I assume this timestamp denotes when the user enrolled as a student on the course.
* *unenrolled_at*, giving a date and time. I assume this timestamp denotes when a user ceased to be a student on the course, i.e. withdrew from study.
* *role*, denoting whether the user is a student (in which case they are assigned the value 'learner') or an organisational administrator (in which case they are assiged the value 'organisation_admin').
```{r role levels, echo=FALSE}
levels(enrollmentData$role)
```
* *fully_participated_at*, giving a date and time. I assume this timestamp denotes when the student fully completed all steps of the course.
* *purchased_statement_at*, giving a date and time. I assume this timestamp denotes when the student purchased the course content.
* *gender*, denoting the gender of the student with one of the following values:
```{r gender levels, echo=FALSE}
levels(enrollmentData$gender)
```
* *country*, giving a two letter country code for each row (or 'Unknown' if the value is unknown). I assume this information originated from students on the course, and is therefore differentiated from *detected_country* (see below). The possible values in the data are:
```{r country levels, echo=FALSE}
levels(enrollmentData$country)
```
* *age_range*, giving - for each row in the data - an age range within which the user's age falls (or 'Unknown' if the value is unknown). The following ranges are in the data:
```{r}
levels(enrollmentData$age_range)
```
* *highest_education_level*, giving - for each row in the data - the highest educaton level attained by the user at time of taking the course (or 'Unknown' if the value is unknown). I assume this has been inputted by the user. The following levels are in the data:
```{r}
levels(enrollmentData$highest_education_level)
```
* *employment_status*, giving - for each row in the data - the user's employment status at time of taking the course (or 'Unknown' if the value is unknown). I assume this has been inputted by the user. The following levels are in the data:
```{r}
levels(enrollmentData$employment_status)
```
* *employment_area*, giving - for each row in the data - the sector in which the user was employed at time of taking the course (or 'Unknown' if the value is unknown). I assume this has been inputted by the user. The following levels are in the data:
```{r}
levels(enrollmentData$employment_area)
```
* *detected_country*

```{r structure of enrollment data, echo=FALSE}
str(enrollmentData)
```


# Data exploration report


# Data quality report

## User personality archetype data
Need to demonstrate the relative amounts of data that is present to absent.
Given the small amount of data present, is unclear that there is reason to consider any finding significant.

```{r cars}
qplot(data = archetypeData, x = archetype, fill = archetype)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
